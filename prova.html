<!DOCTYPE html>
<html>
<head>
  <title>Piano cartesiano</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #canvas {
      width: 800px;
      height: 600px;
      margin: 0 auto;
      position: relative;
    }

    svg {
      width: 100%;
      height: 100%;
    }

    circle {
      fill: green; /* Colore delle foglie */
    }

    .fish {
      fill: blue; /* Colore dei pesciolini */
      opacity: 0; /* I pesciolini sono inizialmente nascosti */
    }
  </style>
</head>
<body>
  <div id="canvas">
    <svg viewBox="0 0 800 600">
      <!-- Foglie -->
      <g id="leaves"></g>

      <!-- Pesciolini -->
      <g id="fishes"></g>
    </svg>
  </div>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    d3.json("data.json").then(function(data) {
      drawLeaves(data);
    });

    function drawLeaves(data) {
      var svg = d3.select("svg");
      var leaves = svg.select("#leaves");

      var leafSize = 30; // Dimensione delle foglie

      leaves
        .selectAll("circle")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", function(d) {
          return d.x1;
        })
        .attr("cy", function(d) {
          return d.y1;
        })
        .attr("r", leafSize / 2);

      var fishes = svg.select("#fishes");

      var fishSize = 20; // Dimensione dei pesciolini

      fishes
        .selectAll("path")
        .data(data)
        .enter()
        .append("path")
        .attr("class", "fish")
        .attr(
          "d",
          "M0 0 C20 -10 20 10 0 0 Z" // Silhouette di un pesciolino
        )
        .attr("transform", function(d) {
          return "translate(" + d.x1 + "," + d.y1 + ")";
        });

      // Evento di click sulla foglia
      leaves.selectAll("circle").on("click", function(d, i) {
        var leaf = d3.select(this);
        var fish = fishes.selectAll("path").filter(function(_, index) {
          return index === i;
        });

        // Animazione di spostamento della foglia
        leaf
          .transition()
          .duration(1000)
          .attr("cx", function(d) {
            return d.x3;
          })
          .attr("cy", function(d) {
            return d.y3;
          });

        // Animazione di spostamento del pesciolino
        fish
          .transition()
          .delay(1000) // Delay per far s√¨ che il pesciolino si sposti dopo la foglia
          .duration(1000)
          .attr("transform", function(d) {
            return "translate(" + d.x3 + "," + d.y3 + ")";
          })
          .attr("opacity", 1); // Mostra il pesciolino

        // Al click successivo, torna alla configurazione iniziale
        leaf
